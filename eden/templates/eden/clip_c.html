{% extends "eden/base_clip.html" %}
{% load static %}

{% block title %}{{ clip.name }}{% endblock %}

{% block content %}
  <div class="video-editor-container">
    <h1 class="main-title">{{ clip.name }}</h1>

    <div class="video-player">
      <video id="clipC"
             class="clip-video"
             controls
             data-choices-show-time="91"
             data-idle-timeout-ms="10000"
             data-idle-choice-selector="#choice-1">
        <source src="{{ clip.video.url }}" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>

    <!-- News ticker below video player -->
  <div class="news-ticker-container" id="newsTicker">
    <div class="news-ticker">
      <span>
        BREAKING: Kenya launches Africaâ€™s largest green tech hub! | Nairobi traffic robots now powered by AI! | Kenyan animators win global awards for interactive storytelling!
      </span>
    </div>
  </div>
  <!-- End news ticker -->

    <p class="subtitle">{{ clip.description }}</p>

    <!-- Choices (hidden by default) -->
    <div id="choices" style="display:none;">
      <h2 class="subtitle">What do you want to investigate?</h2>
      <div class="choices">
        {% for choice in choices %}
          <button
            class="choice-link"
            id="choice-{{ forloop.counter }}"
            hx-get="{% url 'eden:clip_detail' choice.to_clip.slug %}"
            hx-target="#main-content"
            hx-swap="innerHTML">
            {{ choice.label }}
          </button>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}

{% block extra_scripts %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Fade out the ticker after 10 seconds
    setTimeout(function() {
      var ticker = document.getElementById('newsTicker');
      if (ticker) ticker.classList.add('fade-out');
    }, 10000);
    // Initialize the clip logic for the first page load
    setupInteractiveClip();
  });
</script>
{% endblock %}